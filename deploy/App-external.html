<!DOCTYPE html>
<html>
<head>
    <title>point-burndown</title>

    <script type="text/javascript" src="https://rally1.rallydev.com/apps/2.1/sdk.js"></script>

    <script type="text/javascript">
        Rally.onReady(function () {
                var ITERATION_ID=0,DATA={},DATE_ITR=null,START_DATE=null,END_DATE=null;Ext.define("CustomApp",{extend:"Rally.app.App",launch:function(){alert("Paused");var types=Rally.data.ModelFactory.types;Rally.data.ModelFactory.getModel({type:"iteration",context:this.getContext().getDataContext(),success:this.onIterationModelLoaded,scope:this})},onIterationModelLoaded:function(model){var iteration_id=47998626614;model.load(iteration_id,{fetch:["ObjectID","StartDate","EndDate"],callback:this.onIterationLoaded,scope:this})},onIterationLoaded:function(record,operation){operation.wasSuccessful()&&(alert("Iteration Model Loaded"),ITERATION_ID=record.get("ObjectID"),START_DATE=record.get("StartDate"),END_DATE=record.get("EndDate"),DATE_ITR=START_DATE,alert("Iteration ID: "+ITERATION_ID),alert("Start Date: "+new Date(DATE_ITR).toISOString()),this.loadWorkItemsForDate(new Date(DATE_ITR)))},loadWorkItemsForDate:function(date){var snapshotStore=Ext.create("Rally.data.lookback.SnapshotStore",{fetch:["PlanEstimate","ScheduleState"],autoLoad:!0,listeners:{load:this.onWorkItemsLoaded},context:this.getContext().getDataContext(),limit:1/0,hydrate:["ScheduleState"],find:{Iteration:ITERATION_ID,__At:date.toISOString()}});snapshotStore.load()},onWorkItemsLoaded:function(store,records){alert("Work Items Loaded!"),alert(records.length)}});

            Rally.launchApp('CustomApp', {
                name:"point-burndown",
	            parentRepos:""
            });

        });
    </script>


    <style type="text/css">
        
    </style>
</head>
<body>
</body>
</html>
